# 题目：基于Rust语言的lwIP兼容安全嵌入式网络协议栈设计

## 描述：
当前大多数嵌入式网络协议栈（如LWIP、uIP、FreeRTOS+TCP等）在内存管理和安全性方面面临显著挑战。由于这些协议栈主要使用C语言编写，依赖手动管理内存分配和释放，容易引发缓冲区溢出、内存泄漏、悬空指针等内存安全问题。这些问题不仅影响系统稳定性，还可能成为攻击者的入口点，导致系统崩溃或恶意代码执行。此外，在性能优化方面，如何在资源受限的嵌入式环境中同时保证协议栈的安全性和性能，一直是网络协议栈设计中的关键难题。

本题目旨在利用Rust语言的“内存安全”特性，通过其所有权机制和生命周期检查，在编译阶段即防止许多常见的内存错误，设计并实现一个既高效又安全的嵌入式网络协议栈，并将其移植到RTOS上进行性能测试。目标是解决现有协议栈中存在的内存安全与性能之间的矛盾，满足高性能嵌入式应用的需求，并为物联网和边缘计算设备提供安全通信的技术基础。

此外，市场上的确存在基于Rust的网络协议栈，但它们大多数（1）不完善，（2）未提供C语言绑定，（3）接口语义与lwIP不兼容，在实际使用中难以落地。为此，本项目要求该协议栈与lwIP直接兼容，并且可编译为库文件直接原样导入那些现在使用lwIP的工程中，成为标准的可替换组件。

## 特征：
- 利用Rust语言的所有权机制和生命周期检查确保内存安全。
- 设计优化的内存管理策略和数据结构，以提高性能并减少资源消耗。
- 针对lwIP进行兼容性设计，确保与现有协议栈的100%互换性
- 移植到RTOS（RT-Thread、FreeRTOS等）平台，并评估其对性能的影响。

## 预期目标：

**第一题：需求分析与设计**
- 对现有嵌入式网络协议栈进行深入分析，识别主要的内存安全问题或/和性能瓶颈。
- 根据分析结果，制定详细的设计文档，包括协议栈架构、模块划分、以及各模块的功能描述。
- 选择合适的Rust库和工具，作为协议栈开发的基础。如有可能，尽量不要引入庞大的外部依赖。

**第二题：协议栈实现**
- 使用Rust语言实现选定的网络协议栈，重点关注内存安全特性的应用，如所有权机制和生命周期检查。
- 实现优化的内存管理策略和数据结构，确保在保持高性能的同时减少内存占用。
- 开发必要的测试案例，验证协议栈的功能正确性和性能指标。
- 一方面不能使用过多Unsafe代码，另外又要保证Rust的所有权检查和全局变量锁机制不消耗太多性能。

**第三题：性能与安全性评估**
- 在RTOS上测试并分析所实现的协议栈在不同负载条件下的性能表现，包括延迟、吞吐量等关键指标。
- 进行安全性评估，检验协议栈能否有效防御已知的安全威胁，如缓冲区溢出等。
- 与lwIP进行全互换测试，确保与原版lwIP的100%二进制接口兼容性。

## 要求形成的最终系统
- 进行全面的系统测试，包括但不限于功能测试、性能测试以及简单安全测试。
- 编写详细的文档，记录项目的开发过程、遇到的问题及解决方案。
- 与lwIP 100%兼容。

## 参考材料
- lwIP官方网站
https://savannah.nongnu.org/projects/lwip/

## 联系方式

20191081@gdufe.edu.cn
